<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–∞–π–¥–∏ —Å–≤–æ—é –í–∞–ª–µ–Ω—Ç–∏–Ω–∫—É!</title>
    <style>
        body { margin: 0; padding: 0; background: #ffe6e6; font-family: 'Arial', sans-serif; overflow: hidden; touch-action: manipulation; }
        #game-container { position: relative; width: 100vw; height: 100vh; background: linear-gradient(#a0e0ff, #ffe6e6); border-bottom: 50px solid #8B4513; }
        
        .title { position: absolute; width: 100%; text-align: center; top: 20px; color: #d63384; font-size: 24px; font-weight: bold; z-index: 10; }

        /* –ò–≥—Ä–æ–∫ (–ü–∞—Ä–µ–Ω—å) */
        #player {
            position: absolute; width: 40px; height: 60px; bottom: 50px; left: 20px;
            background: #3498db; border-radius: 5px; transition: transform 0.1s;
        }
        #player::before { content: ''; position: absolute; top: -15px; left: 5px; width: 30px; height: 30px; background: #ffdbac; border-radius: 50%; box-shadow: inset 0 10px 0 #444; } /* –ì–æ–ª–æ–≤–∞ –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ –≤–æ–ª–æ—Å—ã */
        #player::after { content: '..'; position: absolute; top: -5px; left: 10px; color: #00bfff; font-weight: bold; font-size: 20px; } /* –ì–æ–ª—É–±—ã–µ –≥–ª–∞–∑–∞ */

        /* –î–µ–≤—É—à–∫–∞ */
        #girl {
            position: absolute; width: 40px; height: 60px; bottom: 50px; right: 40px;
            background: #ff69b4; border-radius: 5px;
        }
        #girl::before { content: ''; position: absolute; top: -15px; left: 5px; width: 30px; height: 50px; background: #8b4513; border-radius: 15px 15px 5px 5px; z-index: -1; } /* –î–ª–∏–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã */
        #girl::after { content: '..'; position: absolute; top: -5px; left: 10px; color: #32cd32; font-weight: bold; font-size: 20px; } /* –ó–µ–ª–µ–Ω—ã–µ –≥–ª–∞–∑–∞ */
        .face { position: absolute; top: -15px; left: 5px; width: 30px; height: 30px; background: #ffdbac; border-radius: 50%; }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .controls { position: absolute; bottom: 70px; width: 100%; display: flex; justify-content: space-around; z-index: 20; }
        .btn { width: 60px; height: 60px; background: rgba(255,255,255,0.7); border: 2px solid #d63384; border-radius: 50%; font-size: 24px; display: flex; align-items: center; justify-content: center; user-select: none; }

        /* –§–∏–Ω–∞–ª */
        #final-msg { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 30; }
        .heart { font-size: 100px; color: red; animation: beat 1s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="title" id="instr">–ù–∞–π–¥–∏ —Å–≤–æ—é –í–∞–ª–µ–Ω—Ç–∏–Ω–∫—É! ‚ù§Ô∏è</div>
        
        <div id="player"></div>
        
        <div id="girl">
            <div class="face"></div>
        </div>

        <div id="final-msg">
            <div class="heart">‚ù§Ô∏è</div>
            <h2 style="color: #d63384;">–û–±–æ–∂–∞—é —Ç–µ–±—è! üíã</h2>
        </div>

        <div class="controls">
            <div class="btn" id="left">‚¨ÖÔ∏è</div>
            <div class="btn" id="jump">üöÄ</div>
            <div class="btn" id="right">‚û°Ô∏è</div>
        </div>
    </div>

    <script>
        const player = document.getElementById('player');
        const girl = document.getElementById('girl');
        const finalMsg = document.getElementById('final-msg');
        const instr = document.getElementById('instr');
        
        let posX = 20;
        let posY = 50;
        let isJumping = false;

        function checkCollision() {
            const pRect = player.getBoundingClientRect();
            const gRect = girl.getBoundingClientRect();

            if (!(pRect.right < gRect.left || pRect.left > gRect.right)) {
                finalMsg.style.display = 'block';
                instr.style.display = 'none';
                player.style.left = (gRect.left - 20) + 'px';
            }
        }

        document.getElementById('right').ontouchstart = () => {
            if(posX < window.innerWidth - 100) {
                posX += 20;
                player.style.left = posX + 'px';
                player.style.transform = 'scaleX(1)';
                checkCollision();
            }
        };

        document.getElementById('left').ontouchstart = () => {
            if(posX > 10) {
                posX -= 20;
                player.style.left = posX + 'px';
                player.style.transform = 'scaleX(-1)';
                checkCollision();
            }
        };

        document.getElementById('jump').ontouchstart = () => {
            if (!isJumping) {
                isJumping = true;
                player.style.transition = 'bottom 0.4s ease-out';
                player.style.bottom = '150px';
                setTimeout(() => {
                    player.style.bottom = '50px';
                    setTimeout(() => { isJumping = false; }, 400);
                }, 400);
            }
        };

        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–∫–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ü–ö
        document.getElementById('right').onclick = () => { posX += 20; player.style.left = posX + 'px'; checkCollision(); };
        document.getElementById('left').onclick = () => { posX -= 20; player.style.left = posX + 'px'; checkCollision(); };
    </script>
</body>
</html>
